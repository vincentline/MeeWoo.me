# PNG压缩页面实现计划

## 1. 页面结构设计

### 1.1 整体布局
- **顶部区域**：页面标题和主题切换按钮
- **主要内容区**：
  - 拖拽区域（用于拖入PNG图片）
  - 图片列表（显示已拖入的图片，包含缩略图和信息）
  - 操作按钮区（压缩按钮、清空按钮）
  - 进度显示区（显示每个图片的压缩进度）
  - 下载按钮区（压缩完成后显示，提供打包下载功能）
- **底部区域**：版权信息和帮助链接

### 1.2 核心组件
- **拖拽组件**：支持拖入多个PNG图片，显示拖入状态
- **图片项组件**：显示图片缩略图、文件名、大小和压缩状态
- **进度条组件**：显示单个图片和整体压缩进度
- **按钮组件**：使用设计系统中的按钮样式

## 2. 功能实现

### 2.1 拖拽功能
- 监听拖拽事件（dragenter, dragover, drop, dragleave）
- 验证拖入的文件是否为PNG格式
- 显示拖入图片的预览和信息

### 2.2 压缩功能
- 调用现有的 `image-compression-service.js` 进行图片压缩
- 支持批量压缩，显示每个图片的压缩进度
- 计算压缩前后的文件大小和压缩率

### 2.3 进度显示
- 显示单个图片的压缩进度
- 显示整体压缩进度
- 显示压缩状态（等待、压缩中、完成、失败）

### 2.4 下载功能
- 使用现有的 `jszip.min.js` 库将压缩后的图片打包成ZIP文件
- 支持单个图片下载和批量打包下载
- 显示下载进度（可选）

## 3. 样式设计

### 3.1 遵循设计系统
- 使用设计系统中定义的颜色、字体、间距等设计令牌
- 使用现有的按钮、输入框、进度条等组件样式
- 支持暗黑模式切换

### 3.2 响应式设计
- 适配不同屏幕尺寸
- 在小屏幕设备上优化布局

## 4. 技术栈

### 4.1 核心库
- **image-compression-service.js**：用于图片压缩
- **jszip.min.js**：用于打包下载

### 4.2 新增文件
- **png_compression.html**：主页面文件
- **png_compression.css**：页面样式文件
- **png_compression.js**：页面逻辑文件

## 5. 实现步骤

### 5.1 创建页面文件
- 创建 `docs/gadgets/png_compression.html`
- 创建 `docs/gadgets/png_compression.css`
- 创建 `docs/gadgets/png_compression.js`

### 5.2 实现HTML结构
- 构建页面整体布局
- 实现拖拽区域
- 实现图片列表和进度显示
- 添加操作按钮

### 5.3 实现样式
- 引入设计系统样式
- 实现拖拽区域样式
- 实现图片项样式
- 实现进度条样式
- 支持暗黑模式

### 5.4 实现JavaScript逻辑
- 实现拖拽功能
- 实现图片压缩功能
- 实现进度显示功能
- 实现下载功能
- 实现主题切换功能

### 5.5 测试和优化
- 测试拖拽功能
- 测试压缩功能
- 测试下载功能
- 测试暗黑模式切换
- 优化性能和用户体验

## 6. 预期效果

- 用户可以拖入多个PNG图片
- 显示每个图片的压缩进度和结果
- 压缩完成后可以打包下载所有压缩后的图片
- 支持暗黑模式切换
- 页面设计遵循项目的UI设计系统

## 7. 资源引用

- 样式文件：`../assets/css/styles.css`
- 核心库：
  - `../assets/js/lib/jszip.min.js`
  - `../assets/js/service/image-compression-service.js`
  - `../assets/js/lib/pako.min.js`（压缩服务依赖）