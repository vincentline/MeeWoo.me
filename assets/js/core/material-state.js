!function(t){"use strict";t.MeeWoo=t.MeeWoo||{},t.MeeWoo.Core=t.MeeWoo.Core||{};var e={getDefaultEditorState:function(){return{show:!1,targetIndex:-1,loading:!1,viewMode:"fit-height",scale:1,offsetX:0,offsetY:0,exportAreaX:0,exportAreaY:0,baseImage:null,baseImageWidth:0,baseImageHeight:0,defaultBaseImage:null,showRestoreBtn:!1,showImage:!0,showText:!1,textContent:"",textStyle:"",activeElement:"none",lastClickElement:"none",lastClickTime:0,isDragging:!1,dragStartX:0,dragStartY:0,dragStartOffsetX:0,dragStartOffsetY:0,imageOffsetX:0,imageOffsetY:0,imageScale:1,isImageDragging:!1,imageDragStartX:0,imageDragStartY:0,imageDragStartOffsetX:0,imageDragStartOffsetY:0,imageMouseMoved:!1,textPosX:50,textPosY:50,textScale:1,textAlign:"left",isTextDragging:!1,textDragStartX:0,textDragStartY:0,textDragStartPosX:50,textDragStartPosY:50,textMouseMoved:!1,_batchUpdate:!1,_pendingUpdates:{},_batchTimeout:null}},getDefaultMaterialEditStates:function(){return{}},resetEditorState:function(t){var e=this.getDefaultEditorState();for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])},updateRestoreButtonState:function(t){var e=!1,a=t.defaultBaseImage;a&&t.baseImage!==a?e=!0:t.showImage?(t.showText||0!==t.imageOffsetX||0!==t.imageOffsetY||Math.abs(t.imageScale-1)>.001)&&(e=!0):e=!0,t.showRestoreBtn=e},saveMaterialEditState:function(t,e,a){t[e]={textContent:a.textContent,textStyle:a.textStyle,showImage:a.showImage,showText:a.showText,textPosX:a.textPosX,textPosY:a.textPosY,textScale:a.textScale,textAlign:a.textAlign,imageOffsetX:a.imageOffsetX,imageOffsetY:a.imageOffsetY,imageScale:a.imageScale,customBaseImage:a.baseImage!==a.defaultBaseImage?a.baseImage:void 0,originalBaseImageWidth:a.baseImageWidth,originalBaseImageHeight:a.baseImageHeight}},restoreMaterialEditState:function(t,e,a){var i=t[e];i&&(a.showImage=i.showImage,a.showText=i.showText,a.textContent=i.textContent||"",a.textStyle=i.textStyle||"",a.textPosX=void 0!==i.textPosX?i.textPosX:50,a.textPosY=void 0!==i.textPosY?i.textPosY:50,a.textScale=void 0!==i.textScale?i.textScale:1,a.textAlign=void 0!==i.textAlign?i.textAlign:"left",a.imageOffsetX=void 0!==i.imageOffsetX?i.imageOffsetX:0,a.imageOffsetY=void 0!==i.imageOffsetY?i.imageOffsetY:0,a.imageScale=void 0!==i.imageScale?i.imageScale:1,i.customBaseImage&&(a.baseImage=i.customBaseImage))},clearMaterialEditState:function(t,e){t[e]&&delete t[e]},startBatchUpdate:function(t){t._batchUpdate=!0,t._pendingUpdates={}},endBatchUpdate:function(t,a,i){i=i||0;t._batchTimeout&&(clearTimeout(t._batchTimeout),t._batchTimeout=null),t._batchTimeout=setTimeout(function(){e.applyBatchUpdates(t),t._batchUpdate=!1,t._batchTimeout=null,"function"==typeof a&&a()},i)},applyBatchUpdates:function(t){if(t._batchUpdate&&0!==Object.keys(t._pendingUpdates).length){for(var e in t._pendingUpdates)t._pendingUpdates.hasOwnProperty(e)&&(t[e]=t._pendingUpdates[e]);t._pendingUpdates={}}},updateEditorState:function(t,e){t._batchUpdate?Object.assign(t._pendingUpdates,e):Object.assign(t,e)},cancelBatchUpdate:function(t){t._batchTimeout&&(clearTimeout(t._batchTimeout),t._batchTimeout=null),t._batchUpdate=!1,t._pendingUpdates={}}};t.MeeWoo.Core.MaterialState=e}(window);