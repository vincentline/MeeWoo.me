{"remainingRequest":"F:\\百度云同步盘\\BaiduSyncdisk\\04生活\\小工具\\a-viewer-main\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\百度云同步盘\\BaiduSyncdisk\\04生活\\小工具\\a-viewer-main\\.vuepress\\components\\aview.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\百度云同步盘\\BaiduSyncdisk\\04生活\\小工具\\a-viewer-main\\.vuepress\\components\\aview.vue","mtime":1764567120830},{"path":"F:\\百度云同步盘\\BaiduSyncdisk\\04生活\\小工具\\a-viewer-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1765057400033},{"path":"F:\\百度云同步盘\\BaiduSyncdisk\\04生活\\小工具\\a-viewer-main\\node_modules\\babel-loader\\lib\\index.js","mtime":1765057400229},{"path":"F:\\百度云同步盘\\BaiduSyncdisk\\04生活\\小工具\\a-viewer-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1765057400033},{"path":"F:\\百度云同步盘\\BaiduSyncdisk\\04生活\\小工具\\a-viewer-main\\node_modules\\vue-loader\\lib\\index.js","mtime":1765057400705}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci8vIOaSreaUvuWuueWZqOWwuuWvuO+8muWfuuS6juaWh+S7tuWwuuWvuO+8jOacgOWkp+WuveW6piAxNTAw77yM562J5q+U57yp5pS+77yb5ZCM5q2l6K6+572u54i25a655ZmoIHZpZXdlci1zY3JlZW4g6auY5bqmCmZ1bmN0aW9uIHNldENvbnRhaW5lclNpemUoY29udGFpbmVyLCB3LCBoKSB7CiAgICBjb25zdCBtYXhXID0gMTUwMDsKICAgIGlmICghdyB8fCAhaCkgeyB3ID0gMjAwOyBoID0gMjAwOyB9CiAgICBjb25zdCB3aWR0aCA9IE1hdGgubWluKHcsIG1heFcpOwogICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5yb3VuZChoICogKHdpZHRoIC8gdykpOwogICAgY29udGFpbmVyLnN0eWxlLndpZHRoID0gd2lkdGggKyAncHgnOwogICAgY29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCc7CiAgICBjb25zdCBwYXJlbnQgPSBjb250YWluZXIucGFyZW50RWxlbWVudDsKICAgIGlmIChwYXJlbnQgJiYgcGFyZW50LmNsYXNzTGlzdC5jb250YWlucygndmlld2VyLXNjcmVlbicpKSB7CiAgICAgICAgcGFyZW50LnN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCc7CiAgICB9Cn0KCmNsYXNzIFBsYXllciB7CiAgICBjb25zdHJ1Y3RvcihmaWxlLCBjb250YWluZXIpIHsKICAgICAgICB0aGlzLmRhdGEgPSAnJzsKICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjsKICAgICAgICB0aGlzLnBsYXllciA9IG51bGw7CiAgICB9CiAgICBsb2FkKCkge30KICAgIGluaXQoKSB7fQogICAgY3JlYXRlKCkge30KICAgIGRlc3Ryb3koKSB7fQogICAgY2hhbmdlU2l6ZSgpIHt9Cn0KCmNsYXNzIFN2Z2FQbGF5ZXIgZXh0ZW5kcyBQbGF5ZXIgewogICAgY29uc3RydWN0b3IoZmlsZSwgY29udGFpbmVyLCBvbk1ldGEpIHsKICAgICAgICBzdXBlcihmaWxlLCBjb250YWluZXIpOwogICAgICAgIHRoaXMub25NZXRhID0gb25NZXRhOwogICAgICAgIHRoaXMudXJsID0gbnVsbDsKICAgICAgICB0aGlzLmluaXQoZmlsZSk7CiAgICB9CgogICAgbG9hZChmaWxlKSB7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgICAgIC8vIOmihOWFiOeUn+aIkCBCbG9iIFVSTO+8jOS9nOS4uiBsb2FkIOeahOS4u+imgei+k+WFpQogICAgICAgICAgICB0cnkgeyB0aGlzLnVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7IH0gY2F0Y2ggKGUpIHsgdGhpcy51cmwgPSBudWxsOyB9CiAgICAgICAgICAgIC8vIOWQjOaXtuivu+WPliBBcnJheUJ1ZmZlcu+8jOS9nOS4uuWkh+eUqAogICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICByZWFkZXIub25sb2FkID0gKGV2dCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gZXZ0LnRhcmdldC5yZXN1bHQ7IC8vIEFycmF5QnVmZmVyCiAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMuZGF0YSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTsKICAgICAgICB9KTsKICAgIH0KCiAgICBpbml0KGZpbGUpIHsKICAgICAgICB0aGlzLmxvYWQoZmlsZSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuY3JlYXRlKCk7CiAgICAgICAgfSk7CiAgICB9CgogICAgY3JlYXRlKCkgewogICAgICAgIHRoaXMucGxheWVyID0gbmV3IFNWR0EuUGxheWVyKHRoaXMuY29udGFpbmVyKTsKICAgICAgICBjb25zdCBwYXJzZXIgPSBuZXcgU1ZHQS5QYXJzZXIoKTsKICAgICAgICBjb25zdCBzb3VyY2UgPSB0aGlzLnVybCB8fCB0aGlzLmRhdGE7IC8vIOS8mOWFiOeUqCBCbG9iIFVSTO+8jOWFvOWuuSAyLjMuMQogICAgICAgIHBhcnNlci5sb2FkKHNvdXJjZSwgKHZpZGVvSXRlbSkgPT4gewogICAgICAgICAgICB0aGlzLnBsYXllci5zZXRWaWRlb0l0ZW0odmlkZW9JdGVtKTsKICAgICAgICAgICAgY29uc3Qgc3ogPSB2aWRlb0l0ZW0udmlkZW9TaXplIHx8IHt9OwogICAgICAgICAgICBjb25zdCBmcHMgPSB2aWRlb0l0ZW0uRlBTIHx8IHZpZGVvSXRlbS5mcHM7CgogICAgICAgICAgICBzZXRDb250YWluZXJTaXplKHRoaXMuY29udGFpbmVyLCBzei53aWR0aCwgc3ouaGVpZ2h0KTsKCiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vbk1ldGEgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgIHRoaXMub25NZXRhKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3ZnYScsCiAgICAgICAgICAgICAgICAgICAgZnBzLAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiBzei53aWR0aCwKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHN6LmhlaWdodAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5wbGF5ZXIuc3RhcnRBbmltYXRpb24oKTsKICAgICAgICB9KTsKICAgIH0KCiAgICBkZXN0cm95KCkgewogICAgICAgIGlmICh0aGlzLnBsYXllcikgewogICAgICAgICAgICB0aGlzLnBsYXllci5zdG9wQW5pbWF0aW9uKCk7CiAgICAgICAgICAgIEFycmF5LmZyb20odGhpcy5jb250YWluZXIuY2hpbGRyZW4pLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy51cmwpIHsKICAgICAgICAgICAgdHJ5IHsgVVJMLnJldm9rZU9iamVjdFVSTCh0aGlzLnVybCk7IH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgIHRoaXMudXJsID0gbnVsbDsKICAgICAgICB9CiAgICB9CgogICAgY2hhbmdlU2l6ZSgpIHsKICAgICAgICB0aGlzLmRlc3Ryb3koKTsKICAgICAgICB0aGlzLmNyZWF0ZSgpOwogICAgfQp9CgpjbGFzcyBMb3R0aWVQbGF5ZXIgZXh0ZW5kcyBQbGF5ZXIgewogICAgY29uc3RydWN0b3IoZmlsZSwgY29udGFpbmVyKSB7CiAgICAgICAgc3VwZXIoZmlsZSwgY29udGFpbmVyKTsKICAgICAgICB0aGlzLmRhdGEgPSB7fTsKICAgICAgICB0aGlzLmluaXQoZmlsZSk7CiAgICB9CgogICAgbG9hZChmaWxlKSB7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGV2dCA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSBKU09OLnBhcnNlKGV2dC50YXJnZXQucmVzdWx0KTsKICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5kYXRhKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7CiAgICAgICAgfSk7CiAgICB9CgogICAgaW5pdChmaWxlKSB7CiAgICAgICAgdGhpcy5sb2FkKGZpbGUpLnRoZW4oKCkgPT4gewogICAgICAgICAgICB0aGlzLmNyZWF0ZSgpOwogICAgICAgIH0pOwogICAgfQoKICAgIGNyZWF0ZSgpIHsKICAgICAgICBjb25zdCB3ID0gdGhpcy5kYXRhLncgfHwgdGhpcy5kYXRhLndpZHRoOwogICAgICAgIGNvbnN0IGggPSB0aGlzLmRhdGEuaCB8fCB0aGlzLmRhdGEuaGVpZ2h0OwogICAgICAgIHNldENvbnRhaW5lclNpemUodGhpcy5jb250YWluZXIsIHcsIGgpOwoKICAgICAgICB0aGlzLnBsYXllciA9IGxvdHRpZS5sb2FkQW5pbWF0aW9uKHsKICAgICAgICAgICAgY29udGFpbmVyOiB0aGlzLmNvbnRhaW5lciwKICAgICAgICAgICAgcmVuZGVyZXI6ICdjYW52YXMnLAogICAgICAgICAgICBsb29wOiB0cnVlLAogICAgICAgICAgICBhdXRvcGxheTogdHJ1ZSwKICAgICAgICAgICAgYW5pbWF0aW9uRGF0YTogdGhpcy5kYXRhLAogICAgICAgIH0pOwogICAgfQoKICAgIGRlc3Ryb3koKSB7CiAgICAgICAgaWYgKHRoaXMucGxheWVyKSB7CiAgICAgICAgICAgIHRoaXMucGxheWVyLnN0b3AoKTsKICAgICAgICAgICAgdGhpcy5wbGF5ZXIuZGVzdHJveSgpOwogICAgICAgIH0KICAgIH0KCiAgICBjaGFuZ2VTaXplKCkgewogICAgICAgIHRoaXMuZGVzdHJveSgpOwogICAgICAgIHRoaXMuY3JlYXRlKCk7CiAgICB9Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdBdmlldycsCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZicsCiAgICAgICAgICAgIGZyb21TaG93OiBmYWxzZSwKICAgICAgICAgICAgdmlld2VyOiAxLAogICAgICAgICAgICAkcGxheWVyOiBudWxsLAogICAgICAgICAgICBhbmltYXRpb25TaG93OiBmYWxzZSwKICAgICAgICAgICAgZmlsZTogewogICAgICAgICAgICAgICAgZnBzOiBudWxsLAogICAgICAgICAgICAgICAgd2lkdGg6IG51bGwsCiAgICAgICAgICAgICAgICBoZWlnaHQ6IG51bGwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29sb3JzOiBbJyMwMDAwMDAnLCAnI2ZmZmZmZicsICcjMDBmZjAwJywgJyNDMDM5MkInLCAnI0YxQzQwRCcsICcjMDBiNGZmJ10KICAgICAgICB9OwogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgLy8g5Zyo5pKt5pS+5Yy65Z+f57un57ut5ouW5YWl5paH5Lu25pu/5o2i5pKt5pS+CiAgICAgICAgY29uc3Qgc2NyZWVuID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvcignLnZpZXdlci1zY3JlZW4nKTsKICAgICAgICBpZiAoc2NyZWVuKSB7CiAgICAgICAgICAgIGNvbnN0IG9uRHJhZ092ZXIgPSAoZSkgPT4geyBlLnByZXZlbnREZWZhdWx0KCk7IH07CiAgICAgICAgICAgIGNvbnN0IG9uRHJvcCA9IChlKSA9PiB7CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICBjb25zdCBmID0gZS5kYXRhVHJhbnNmZXIgJiYgZS5kYXRhVHJhbnNmZXIuZmlsZXMgJiYgZS5kYXRhVHJhbnNmZXIuZmlsZXNbMF07CiAgICAgICAgICAgICAgICBpZiAoZikgeyB0aGlzLmhhbmRsZUJlZm9yZVVwbG9hZChmKTsgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBzY3JlZW4uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBvbkRyYWdPdmVyKTsKICAgICAgICAgICAgc2NyZWVuLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBvbkRyb3ApOwogICAgICAgICAgICB0aGlzLl9jbGVhbnVwRHJhZ0Ryb3AgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICBzY3JlZW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBvbkRyYWdPdmVyKTsKICAgICAgICAgICAgICAgIHNjcmVlbi5yZW1vdmVFdmVudExpc3RlbmVyKCdkcm9wJywgb25Ecm9wKTsKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICBmaWxlU2l6ZSgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuZmlsZS5zaXplKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKHRoaXMuZmlsZS5zaXplIC8gMTAyNCkgKyAna2InCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICcnCiAgICAgICAgfSwKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgc2V0Q29sb3IoYykgeyB0aGlzLmNvbG9yID0gYzsgfSwKCiAgICAgICAgdXBkYXRlU3ZnYU1ldGEobWV0YSkgewogICAgICAgICAgICB0aGlzLmZpbGUuZnBzID0gbWV0YS5mcHMgfHwgbnVsbDsKICAgICAgICAgICAgdGhpcy5maWxlLndpZHRoID0gbWV0YS53aWR0aCB8fCBudWxsOwogICAgICAgICAgICB0aGlzLmZpbGUuaGVpZ2h0ID0gbWV0YS5oZWlnaHQgfHwgbnVsbDsKICAgICAgICB9LAogICAgICAgIGhhbmRsZUJlZm9yZVVwbG9hZChmaWxlKSB7CiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSAoZmlsZSAmJiBmaWxlLm5hbWUpID8gZmlsZS5uYW1lIDogJyc7CiAgICAgICAgICAgIGNvbnN0IGRvbSA9IHRoaXMuJHJlZnMudmlld2VyCgogICAgICAgICAgICBjb25zb2xlLmxvZygnW1VQTE9BRF0gcmVjZWl2ZSBmaWxlOicsIG5hbWUsICdzaXplPScsIGZpbGUgJiYgZmlsZS5zaXplKTsKCiAgICAgICAgICAgIHRoaXMuZmlsZS5uYW1lID0gZmlsZS5uYW1lCiAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmZpbGUsICdzaXplJywgZmlsZS5zaXplKQoKICAgICAgICAgICAgaWYgKHRoaXMuJHBsYXllcikgewogICAgICAgICAgICAgICAgdGhpcy4kcGxheWVyLmRlc3Ryb3koKTsKICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uU2hvdyA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgvXC5zdmdhJC9pLnRlc3QobmFtZSkpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU1ZHQV0gc3RhcnQgbG9hZCcpOwogICAgICAgICAgICAgICAgd2luZG93LnBsYXllciA9IHRoaXMuJHBsYXllciA9IG5ldyBTdmdhUGxheWVyKGZpbGUsIGRvbSwgKG1ldGEpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1NWR0FdIG1ldGE6JywgbWV0YSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdmdhTWV0YShtZXRhKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uU2hvdyA9IHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICgvXC5qc29uJC9pLnRlc3QobmFtZSkpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTE9UVElFXSBzdGFydCBsb2FkJyk7CiAgICAgICAgICAgICAgICB3aW5kb3cucGxheWVyID0gdGhpcy4kcGxheWVyID0gbmV3IExvdHRpZVBsYXllcihmaWxlLCBkb20pCiAgICAgICAgICAgICAgICB0aGlzLmZpbGUuZnBzID0gbnVsbDsKICAgICAgICAgICAgICAgIHRoaXMuZmlsZS53aWR0aCA9IG51bGw7CiAgICAgICAgICAgICAgICB0aGlzLmZpbGUuaGVpZ2h0ID0gbnVsbDsKICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uU2hvdyA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgfSwKICAgIGJlZm9yZURlc3Ryb3koKSB7CiAgICAgICAgaWYgKHRoaXMuX2NsZWFudXBEcmFnRHJvcCkgdGhpcy5fY2xlYW51cERyYWdEcm9wKCk7CiAgICB9Cn0K"},{"version":3,"sources":["aview.vue"],"names":[],"mappings":";AA0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"aview.vue","sourceRoot":".vuepress/components","sourcesContent":["<template>\n    <div class=\"a-view\">\n        <div class=\"from\">\n            <div class=\"lable\">\n                <span>屏幕方向：</span>\n                <el-radio :label=\"1\" v-model=\"viewer\">横屏</el-radio>\n                <el-radio :label=\"2\" v-model=\"viewer\">竖屏</el-radio>\n            </div>\n\n            <div class=\"lable\">\n                <span>背景颜色：</span>\n                <div class=\"color-list\">\n                    <button\n                        v-for=\"c in colors\"\n                        :key=\"c\"\n                        class=\"color-btn\"\n                        :style=\"{ backgroundColor: c }\"\n                        :aria-label=\"c\"\n                        :class=\"{ active: c === color }\"\n                        @click=\"setColor(c)\"></button>\n                </div>\n            </div>\n        </div>\n        <div class=\"lable\">\n            <span>文件信息：</span>\n            <span>{{file.name}}</span>\n            &nbsp&nbsp\n            <span>{{fileSize}}</span>\n            <span v-if=\"file.fps\">&nbsp&nbsp帧率：{{file.fps}}</span>\n            <span v-if=\"file.width && file.height\">&nbsp&nbsp尺寸：{{file.width}}*{{file.height}}</span>\n        </div>\n\n        <div :class=\"['viewer-box', { 'is-mobile': viewer === 2 }]\">\n            <div class=\"viewer-screen\" :style=\"{ backgroundColor: color }\">\n                <div\n                    class=\"viewer\"\n                    id=\"demoCanvas\"\n                    ref=\"viewer\"></div>\n            </div>\n\n            <el-upload\n                v-if=\"animationShow === false\"\n                class=\"viewer-upload\"\n                drag\n                action=\"\"\n                :multiple=\"false\"\n                :show-file-list=\"false\"\n                :before-upload=\"handleBeforeUpload\">\n                <i class=\"el-icon-upload\"></i>\n                <div class=\"el-upload__text\">\n                    将文件拖到此处，或<em>点击上传</em>\n                </div>\n            </el-upload>\n        </div>\n    </div>\n</template>\n\n<script>\n// 播放容器尺寸：基于文件尺寸，最大宽度 1500，等比缩放；同步设置父容器 viewer-screen 高度\nfunction setContainerSize(container, w, h) {\n    const maxW = 1500;\n    if (!w || !h) { w = 200; h = 200; }\n    const width = Math.min(w, maxW);\n    const height = Math.round(h * (width / w));\n    container.style.width = width + 'px';\n    container.style.height = height + 'px';\n    const parent = container.parentElement;\n    if (parent && parent.classList.contains('viewer-screen')) {\n        parent.style.height = height + 'px';\n    }\n}\n\nclass Player {\n    constructor(file, container) {\n        this.data = '';\n        this.container = container;\n        this.player = null;\n    }\n    load() {}\n    init() {}\n    create() {}\n    destroy() {}\n    changeSize() {}\n}\n\nclass SvgaPlayer extends Player {\n    constructor(file, container, onMeta) {\n        super(file, container);\n        this.onMeta = onMeta;\n        this.url = null;\n        this.init(file);\n    }\n\n    load(file) {\n        return new Promise((resolve) => {\n            // 预先生成 Blob URL，作为 load 的主要输入\n            try { this.url = URL.createObjectURL(file); } catch (e) { this.url = null; }\n            // 同时读取 ArrayBuffer，作为备用\n            const reader = new FileReader();\n            reader.onload = (evt) => {\n                this.data = evt.target.result; // ArrayBuffer\n                resolve(this.data);\n            };\n            reader.readAsArrayBuffer(file);\n        });\n    }\n\n    init(file) {\n        this.load(file).then(() => {\n            this.create();\n        });\n    }\n\n    create() {\n        this.player = new SVGA.Player(this.container);\n        const parser = new SVGA.Parser();\n        const source = this.url || this.data; // 优先用 Blob URL，兼容 2.3.1\n        parser.load(source, (videoItem) => {\n            this.player.setVideoItem(videoItem);\n            const sz = videoItem.videoSize || {};\n            const fps = videoItem.FPS || videoItem.fps;\n\n            setContainerSize(this.container, sz.width, sz.height);\n\n            if (typeof this.onMeta === 'function') {\n                this.onMeta({\n                    type: 'svga',\n                    fps,\n                    width: sz.width,\n                    height: sz.height\n                });\n            }\n            this.player.startAnimation();\n        });\n    }\n\n    destroy() {\n        if (this.player) {\n            this.player.stopAnimation();\n            Array.from(this.container.children).forEach(el => el.remove());\n        }\n        if (this.url) {\n            try { URL.revokeObjectURL(this.url); } catch (e) {}\n            this.url = null;\n        }\n    }\n\n    changeSize() {\n        this.destroy();\n        this.create();\n    }\n}\n\nclass LottiePlayer extends Player {\n    constructor(file, container) {\n        super(file, container);\n        this.data = {};\n        this.init(file);\n    }\n\n    load(file) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onload = evt => {\n                this.data = JSON.parse(evt.target.result);\n                resolve(this.data);\n            };\n            reader.readAsText(file);\n        });\n    }\n\n    init(file) {\n        this.load(file).then(() => {\n            this.create();\n        });\n    }\n\n    create() {\n        const w = this.data.w || this.data.width;\n        const h = this.data.h || this.data.height;\n        setContainerSize(this.container, w, h);\n\n        this.player = lottie.loadAnimation({\n            container: this.container,\n            renderer: 'canvas',\n            loop: true,\n            autoplay: true,\n            animationData: this.data,\n        });\n    }\n\n    destroy() {\n        if (this.player) {\n            this.player.stop();\n            this.player.destroy();\n        }\n    }\n\n    changeSize() {\n        this.destroy();\n        this.create();\n    }\n}\n\nexport default {\n    name: 'Aview',\n    data() {\n        return {\n            color: '#ffffff',\n            fromShow: false,\n            viewer: 1,\n            $player: null,\n            animationShow: false,\n            file: {\n                fps: null,\n                width: null,\n                height: null\n            },\n            colors: ['#000000', '#ffffff', '#00ff00', '#C0392B', '#F1C40D', '#00b4ff']\n        };\n    },\n    mounted() {\n        // 在播放区域继续拖入文件替换播放\n        const screen = this.$el.querySelector('.viewer-screen');\n        if (screen) {\n            const onDragOver = (e) => { e.preventDefault(); };\n            const onDrop = (e) => {\n                e.preventDefault();\n                const f = e.dataTransfer && e.dataTransfer.files && e.dataTransfer.files[0];\n                if (f) { this.handleBeforeUpload(f); }\n            };\n            screen.addEventListener('dragover', onDragOver);\n            screen.addEventListener('drop', onDrop);\n            this._cleanupDragDrop = () => {\n                screen.removeEventListener('dragover', onDragOver);\n                screen.removeEventListener('drop', onDrop);\n            };\n        }\n    },\n    computed: {\n        fileSize() {\n            if (this.file.size) {\n                return Math.ceil(this.file.size / 1024) + 'kb'\n            }\n            return ''\n        },\n    },\n    methods: {\n        setColor(c) { this.color = c; },\n\n        updateSvgaMeta(meta) {\n            this.file.fps = meta.fps || null;\n            this.file.width = meta.width || null;\n            this.file.height = meta.height || null;\n        },\n        handleBeforeUpload(file) {\n            const name = (file && file.name) ? file.name : '';\n            const dom = this.$refs.viewer\n\n            console.log('[UPLOAD] receive file:', name, 'size=', file && file.size);\n\n            this.file.name = file.name\n            this.$set(this.file, 'size', file.size)\n\n            if (this.$player) {\n                this.$player.destroy();\n                this.animationShow = false;\n            }\n            if (/\\.svga$/i.test(name)) {\n                console.log('[SVGA] start load');\n                window.player = this.$player = new SvgaPlayer(file, dom, (meta) => {\n                    console.log('[SVGA] meta:', meta);\n                    this.updateSvgaMeta(meta)\n                })\n                this.animationShow = true;\n            }\n\n            if (/\\.json$/i.test(name)) {\n                console.log('[LOTTIE] start load');\n                window.player = this.$player = new LottiePlayer(file, dom)\n                this.file.fps = null;\n                this.file.width = null;\n                this.file.height = null;\n                this.animationShow = true;\n            }\n            return false\n        }\n    },\n    beforeDestroy() {\n        if (this._cleanupDragDrop) this._cleanupDragDrop();\n    }\n}\n</script>\n\n<style scoped>\n.viewer-box {\n    padding: 12px 0;\n    width: 100%;\n    height: auto;\n    min-height: 300px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: relative;\n    margin-top: 24px;\n    border: 1px dashed #ccc;\n}\n\n.viewer-screen {\n    width: 100%;\n    height: auto;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: relative;\n}\n\n/* 新增：颜色按钮样式 */\n.color-list {\n    display: flex;\n    gap: 8px;\n    align-items: center;\n}\n.color-btn {\n    width: 28px;\n    height: 28px;\n    border-radius: 6px;\n    border: 1px solid #ddd;\n    cursor: pointer;\n    padding: 0;\n}\n.color-btn.active {\n    outline: 2px solid #409EFF;\n    outline-offset: 2px;\n}\n\n.is-mobile {\n    background: #333;\n}\n\n.is-mobile>.viewer-screen {\n    width: 375px;\n    height: auto;\n    top: 0px;\n}\n\n.viewer-upload {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n}\n\n.input {\n    width: 100px;\n}\n\n.from {\n    display: flex;\n    height: 40px;\n}\n\n.lable {\n    margin-right: 12px;\n    display: flex;\n    align-items: center;\n}\n\n.lable::after {\n    content: \"\";\n    display: block;\n    height: 50%;\n    border-left: 1px solid #ccc;\n    margin-left: 12px;\n}\n</style>\n\n<style>\n.el-radio {\n    margin-right: 12px;\n}\n\n.el-input__suffix {\n    line-height: 28px;\n}\n\n.el-upload {\n    width: 100%;\n    height: 100%;\n}\n\n.el-upload-dragger {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    background-color: transparent;\n}\n\n.el-upload-dragger .el-icon-upload {\n    margin-top: 0px;\n}\n</style>\n"]}]}