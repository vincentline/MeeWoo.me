{"remainingRequest":"F:\\百度云同步盘\\BaiduSyncdisk\\04生活\\小工具\\a-viewer-main\\node_modules\\babel-loader\\lib\\index.js??ref--3-1!F:\\百度云同步盘\\BaiduSyncdisk\\04生活\\小工具\\a-viewer-main\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\百度云同步盘\\BaiduSyncdisk\\04生活\\小工具\\a-viewer-main\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\百度云同步盘\\BaiduSyncdisk\\04生活\\小工具\\a-viewer-main\\.vuepress\\components\\aview.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\百度云同步盘\\BaiduSyncdisk\\04生活\\小工具\\a-viewer-main\\.vuepress\\components\\aview.vue","mtime":1764567120830},{"path":"F:\\百度云同步盘\\BaiduSyncdisk\\04生活\\小工具\\a-viewer-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1765057400033},{"path":"F:\\百度云同步盘\\BaiduSyncdisk\\04生活\\小工具\\a-viewer-main\\node_modules\\babel-loader\\lib\\index.js","mtime":1765057400229},{"path":"F:\\百度云同步盘\\BaiduSyncdisk\\04生活\\小工具\\a-viewer-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1765057400033},{"path":"F:\\百度云同步盘\\BaiduSyncdisk\\04生活\\小工具\\a-viewer-main\\node_modules\\vue-loader\\lib\\index.js","mtime":1765057400705}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5qc29uLnBhcnNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmRlbGV0ZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwtc2VhcmNoLXBhcmFtcy5oYXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuc2l6ZS5qcyI7Ci8vIOaSreaUvuWuueWZqOWwuuWvuO+8muWfuuS6juaWh+S7tuWwuuWvuO+8jOacgOWkp+WuveW6piAxNTAw77yM562J5q+U57yp5pS+77yb5ZCM5q2l6K6+572u54i25a655ZmoIHZpZXdlci1zY3JlZW4g6auY5bqmCmZ1bmN0aW9uIHNldENvbnRhaW5lclNpemUoY29udGFpbmVyLCB3LCBoKSB7CiAgY29uc3QgbWF4VyA9IDE1MDA7CiAgaWYgKCF3IHx8ICFoKSB7CiAgICB3ID0gMjAwOwogICAgaCA9IDIwMDsKICB9CiAgY29uc3Qgd2lkdGggPSBNYXRoLm1pbih3LCBtYXhXKTsKICBjb25zdCBoZWlnaHQgPSBNYXRoLnJvdW5kKGggKiAod2lkdGggLyB3KSk7CiAgY29udGFpbmVyLnN0eWxlLndpZHRoID0gd2lkdGggKyAncHgnOwogIGNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnOwogIGNvbnN0IHBhcmVudCA9IGNvbnRhaW5lci5wYXJlbnRFbGVtZW50OwogIGlmIChwYXJlbnQgJiYgcGFyZW50LmNsYXNzTGlzdC5jb250YWlucygndmlld2VyLXNjcmVlbicpKSB7CiAgICBwYXJlbnQuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4JzsKICB9Cn0KY2xhc3MgUGxheWVyIHsKICBjb25zdHJ1Y3RvcihmaWxlLCBjb250YWluZXIpIHsKICAgIHRoaXMuZGF0YSA9ICcnOwogICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7CiAgICB0aGlzLnBsYXllciA9IG51bGw7CiAgfQogIGxvYWQoKSB7fQogIGluaXQoKSB7fQogIGNyZWF0ZSgpIHt9CiAgZGVzdHJveSgpIHt9CiAgY2hhbmdlU2l6ZSgpIHt9Cn0KY2xhc3MgU3ZnYVBsYXllciBleHRlbmRzIFBsYXllciB7CiAgY29uc3RydWN0b3IoZmlsZSwgY29udGFpbmVyLCBvbk1ldGEpIHsKICAgIHN1cGVyKGZpbGUsIGNvbnRhaW5lcik7CiAgICB0aGlzLm9uTWV0YSA9IG9uTWV0YTsKICAgIHRoaXMudXJsID0gbnVsbDsKICAgIHRoaXMuaW5pdChmaWxlKTsKICB9CiAgbG9hZChmaWxlKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgIC8vIOmihOWFiOeUn+aIkCBCbG9iIFVSTO+8jOS9nOS4uiBsb2FkIOeahOS4u+imgei+k+WFpQogICAgICB0cnkgewogICAgICAgIHRoaXMudXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHRoaXMudXJsID0gbnVsbDsKICAgICAgfQogICAgICAvLyDlkIzml7bor7vlj5YgQXJyYXlCdWZmZXLvvIzkvZzkuLrlpIfnlKgKICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgcmVhZGVyLm9ubG9hZCA9IGV2dCA9PiB7CiAgICAgICAgdGhpcy5kYXRhID0gZXZ0LnRhcmdldC5yZXN1bHQ7IC8vIEFycmF5QnVmZmVyCiAgICAgICAgcmVzb2x2ZSh0aGlzLmRhdGEpOwogICAgICB9OwogICAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoZmlsZSk7CiAgICB9KTsKICB9CiAgaW5pdChmaWxlKSB7CiAgICB0aGlzLmxvYWQoZmlsZSkudGhlbigoKSA9PiB7CiAgICAgIHRoaXMuY3JlYXRlKCk7CiAgICB9KTsKICB9CiAgY3JlYXRlKCkgewogICAgdGhpcy5wbGF5ZXIgPSBuZXcgU1ZHQS5QbGF5ZXIodGhpcy5jb250YWluZXIpOwogICAgY29uc3QgcGFyc2VyID0gbmV3IFNWR0EuUGFyc2VyKCk7CiAgICBjb25zdCBzb3VyY2UgPSB0aGlzLnVybCB8fCB0aGlzLmRhdGE7IC8vIOS8mOWFiOeUqCBCbG9iIFVSTO+8jOWFvOWuuSAyLjMuMQogICAgcGFyc2VyLmxvYWQoc291cmNlLCB2aWRlb0l0ZW0gPT4gewogICAgICB0aGlzLnBsYXllci5zZXRWaWRlb0l0ZW0odmlkZW9JdGVtKTsKICAgICAgY29uc3Qgc3ogPSB2aWRlb0l0ZW0udmlkZW9TaXplIHx8IHt9OwogICAgICBjb25zdCBmcHMgPSB2aWRlb0l0ZW0uRlBTIHx8IHZpZGVvSXRlbS5mcHM7CiAgICAgIHNldENvbnRhaW5lclNpemUodGhpcy5jb250YWluZXIsIHN6LndpZHRoLCBzei5oZWlnaHQpOwogICAgICBpZiAodHlwZW9mIHRoaXMub25NZXRhID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgdGhpcy5vbk1ldGEoewogICAgICAgICAgdHlwZTogJ3N2Z2EnLAogICAgICAgICAgZnBzLAogICAgICAgICAgd2lkdGg6IHN6LndpZHRoLAogICAgICAgICAgaGVpZ2h0OiBzei5oZWlnaHQKICAgICAgICB9KTsKICAgICAgfQogICAgICB0aGlzLnBsYXllci5zdGFydEFuaW1hdGlvbigpOwogICAgfSk7CiAgfQogIGRlc3Ryb3koKSB7CiAgICBpZiAodGhpcy5wbGF5ZXIpIHsKICAgICAgdGhpcy5wbGF5ZXIuc3RvcEFuaW1hdGlvbigpOwogICAgICBBcnJheS5mcm9tKHRoaXMuY29udGFpbmVyLmNoaWxkcmVuKS5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZSgpKTsKICAgIH0KICAgIGlmICh0aGlzLnVybCkgewogICAgICB0cnkgewogICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy51cmwpOwogICAgICB9IGNhdGNoIChlKSB7fQogICAgICB0aGlzLnVybCA9IG51bGw7CiAgICB9CiAgfQogIGNoYW5nZVNpemUoKSB7CiAgICB0aGlzLmRlc3Ryb3koKTsKICAgIHRoaXMuY3JlYXRlKCk7CiAgfQp9CmNsYXNzIExvdHRpZVBsYXllciBleHRlbmRzIFBsYXllciB7CiAgY29uc3RydWN0b3IoZmlsZSwgY29udGFpbmVyKSB7CiAgICBzdXBlcihmaWxlLCBjb250YWluZXIpOwogICAgdGhpcy5kYXRhID0ge307CiAgICB0aGlzLmluaXQoZmlsZSk7CiAgfQogIGxvYWQoZmlsZSkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgcmVhZGVyLm9ubG9hZCA9IGV2dCA9PiB7CiAgICAgICAgdGhpcy5kYXRhID0gSlNPTi5wYXJzZShldnQudGFyZ2V0LnJlc3VsdCk7CiAgICAgICAgcmVzb2x2ZSh0aGlzLmRhdGEpOwogICAgICB9OwogICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTsKICAgIH0pOwogIH0KICBpbml0KGZpbGUpIHsKICAgIHRoaXMubG9hZChmaWxlKS50aGVuKCgpID0+IHsKICAgICAgdGhpcy5jcmVhdGUoKTsKICAgIH0pOwogIH0KICBjcmVhdGUoKSB7CiAgICBjb25zdCB3ID0gdGhpcy5kYXRhLncgfHwgdGhpcy5kYXRhLndpZHRoOwogICAgY29uc3QgaCA9IHRoaXMuZGF0YS5oIHx8IHRoaXMuZGF0YS5oZWlnaHQ7CiAgICBzZXRDb250YWluZXJTaXplKHRoaXMuY29udGFpbmVyLCB3LCBoKTsKICAgIHRoaXMucGxheWVyID0gbG90dGllLmxvYWRBbmltYXRpb24oewogICAgICBjb250YWluZXI6IHRoaXMuY29udGFpbmVyLAogICAgICByZW5kZXJlcjogJ2NhbnZhcycsCiAgICAgIGxvb3A6IHRydWUsCiAgICAgIGF1dG9wbGF5OiB0cnVlLAogICAgICBhbmltYXRpb25EYXRhOiB0aGlzLmRhdGEKICAgIH0pOwogIH0KICBkZXN0cm95KCkgewogICAgaWYgKHRoaXMucGxheWVyKSB7CiAgICAgIHRoaXMucGxheWVyLnN0b3AoKTsKICAgICAgdGhpcy5wbGF5ZXIuZGVzdHJveSgpOwogICAgfQogIH0KICBjaGFuZ2VTaXplKCkgewogICAgdGhpcy5kZXN0cm95KCk7CiAgICB0aGlzLmNyZWF0ZSgpOwogIH0KfQpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0F2aWV3JywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY29sb3I6ICcjZmZmZmZmJywKICAgICAgZnJvbVNob3c6IGZhbHNlLAogICAgICB2aWV3ZXI6IDEsCiAgICAgICRwbGF5ZXI6IG51bGwsCiAgICAgIGFuaW1hdGlvblNob3c6IGZhbHNlLAogICAgICBmaWxlOiB7CiAgICAgICAgZnBzOiBudWxsLAogICAgICAgIHdpZHRoOiBudWxsLAogICAgICAgIGhlaWdodDogbnVsbAogICAgICB9LAogICAgICBjb2xvcnM6IFsnIzAwMDAwMCcsICcjZmZmZmZmJywgJyMwMGZmMDAnLCAnI0MwMzkyQicsICcjRjFDNDBEJywgJyMwMGI0ZmYnXQogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICAvLyDlnKjmkq3mlL7ljLrln5/nu6fnu63mi5blhaXmlofku7bmm7/mjaLmkq3mlL4KICAgIGNvbnN0IHNjcmVlbiA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJy52aWV3ZXItc2NyZWVuJyk7CiAgICBpZiAoc2NyZWVuKSB7CiAgICAgIGNvbnN0IG9uRHJhZ092ZXIgPSBlID0+IHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIH07CiAgICAgIGNvbnN0IG9uRHJvcCA9IGUgPT4gewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBjb25zdCBmID0gZS5kYXRhVHJhbnNmZXIgJiYgZS5kYXRhVHJhbnNmZXIuZmlsZXMgJiYgZS5kYXRhVHJhbnNmZXIuZmlsZXNbMF07CiAgICAgICAgaWYgKGYpIHsKICAgICAgICAgIHRoaXMuaGFuZGxlQmVmb3JlVXBsb2FkKGYpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgc2NyZWVuLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgb25EcmFnT3Zlcik7CiAgICAgIHNjcmVlbi5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgb25Ecm9wKTsKICAgICAgdGhpcy5fY2xlYW51cERyYWdEcm9wID0gKCkgPT4gewogICAgICAgIHNjcmVlbi5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIG9uRHJhZ092ZXIpOwogICAgICAgIHNjcmVlbi5yZW1vdmVFdmVudExpc3RlbmVyKCdkcm9wJywgb25Ecm9wKTsKICAgICAgfTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBmaWxlU2l6ZSgpIHsKICAgICAgaWYgKHRoaXMuZmlsZS5zaXplKSB7CiAgICAgICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLmZpbGUuc2l6ZSAvIDEwMjQpICsgJ2tiJzsKICAgICAgfQogICAgICByZXR1cm4gJyc7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZXRDb2xvcihjKSB7CiAgICAgIHRoaXMuY29sb3IgPSBjOwogICAgfSwKICAgIHVwZGF0ZVN2Z2FNZXRhKG1ldGEpIHsKICAgICAgdGhpcy5maWxlLmZwcyA9IG1ldGEuZnBzIHx8IG51bGw7CiAgICAgIHRoaXMuZmlsZS53aWR0aCA9IG1ldGEud2lkdGggfHwgbnVsbDsKICAgICAgdGhpcy5maWxlLmhlaWdodCA9IG1ldGEuaGVpZ2h0IHx8IG51bGw7CiAgICB9LAogICAgaGFuZGxlQmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgY29uc3QgbmFtZSA9IGZpbGUgJiYgZmlsZS5uYW1lID8gZmlsZS5uYW1lIDogJyc7CiAgICAgIGNvbnN0IGRvbSA9IHRoaXMuJHJlZnMudmlld2VyOwogICAgICBjb25zb2xlLmxvZygnW1VQTE9BRF0gcmVjZWl2ZSBmaWxlOicsIG5hbWUsICdzaXplPScsIGZpbGUgJiYgZmlsZS5zaXplKTsKICAgICAgdGhpcy5maWxlLm5hbWUgPSBmaWxlLm5hbWU7CiAgICAgIHRoaXMuJHNldCh0aGlzLmZpbGUsICdzaXplJywgZmlsZS5zaXplKTsKICAgICAgaWYgKHRoaXMuJHBsYXllcikgewogICAgICAgIHRoaXMuJHBsYXllci5kZXN0cm95KCk7CiAgICAgICAgdGhpcy5hbmltYXRpb25TaG93ID0gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKC9cLnN2Z2EkL2kudGVzdChuYW1lKSkgewogICAgICAgIGNvbnNvbGUubG9nKCdbU1ZHQV0gc3RhcnQgbG9hZCcpOwogICAgICAgIHdpbmRvdy5wbGF5ZXIgPSB0aGlzLiRwbGF5ZXIgPSBuZXcgU3ZnYVBsYXllcihmaWxlLCBkb20sIG1ldGEgPT4gewogICAgICAgICAgY29uc29sZS5sb2coJ1tTVkdBXSBtZXRhOicsIG1ldGEpOwogICAgICAgICAgdGhpcy51cGRhdGVTdmdhTWV0YShtZXRhKTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmFuaW1hdGlvblNob3cgPSB0cnVlOwogICAgICB9CiAgICAgIGlmICgvXC5qc29uJC9pLnRlc3QobmFtZSkpIHsKICAgICAgICBjb25zb2xlLmxvZygnW0xPVFRJRV0gc3RhcnQgbG9hZCcpOwogICAgICAgIHdpbmRvdy5wbGF5ZXIgPSB0aGlzLiRwbGF5ZXIgPSBuZXcgTG90dGllUGxheWVyKGZpbGUsIGRvbSk7CiAgICAgICAgdGhpcy5maWxlLmZwcyA9IG51bGw7CiAgICAgICAgdGhpcy5maWxlLndpZHRoID0gbnVsbDsKICAgICAgICB0aGlzLmZpbGUuaGVpZ2h0ID0gbnVsbDsKICAgICAgICB0aGlzLmFuaW1hdGlvblNob3cgPSB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICBpZiAodGhpcy5fY2xlYW51cERyYWdEcm9wKSB0aGlzLl9jbGVhbnVwRHJhZ0Ryb3AoKTsKICB9Cn07"},{"version":3,"names":["setContainerSize","container","w","h","maxW","width","Math","min","height","round","style","parent","parentElement","classList","contains","Player","constructor","file","data","player","load","init","create","destroy","changeSize","SvgaPlayer","onMeta","url","Promise","resolve","URL","createObjectURL","e","reader","FileReader","onload","evt","target","result","readAsArrayBuffer","then","SVGA","parser","Parser","source","videoItem","setVideoItem","sz","videoSize","fps","FPS","type","startAnimation","stopAnimation","Array","from","children","forEach","el","remove","revokeObjectURL","LottiePlayer","reject","JSON","parse","readAsText","lottie","loadAnimation","renderer","loop","autoplay","animationData","stop","name","color","fromShow","viewer","$player","animationShow","colors","mounted","screen","$el","querySelector","onDragOver","preventDefault","onDrop","f","dataTransfer","files","handleBeforeUpload","addEventListener","_cleanupDragDrop","removeEventListener","computed","fileSize","size","ceil","methods","setColor","c","updateSvgaMeta","meta","dom","$refs","console","log","$set","test","window","beforeDestroy"],"sources":[".vuepress/components/aview.vue"],"sourcesContent":["<template>\n    <div class=\"a-view\">\n        <div class=\"from\">\n            <div class=\"lable\">\n                <span>屏幕方向：</span>\n                <el-radio :label=\"1\" v-model=\"viewer\">横屏</el-radio>\n                <el-radio :label=\"2\" v-model=\"viewer\">竖屏</el-radio>\n            </div>\n\n            <div class=\"lable\">\n                <span>背景颜色：</span>\n                <div class=\"color-list\">\n                    <button\n                        v-for=\"c in colors\"\n                        :key=\"c\"\n                        class=\"color-btn\"\n                        :style=\"{ backgroundColor: c }\"\n                        :aria-label=\"c\"\n                        :class=\"{ active: c === color }\"\n                        @click=\"setColor(c)\"></button>\n                </div>\n            </div>\n        </div>\n        <div class=\"lable\">\n            <span>文件信息：</span>\n            <span>{{file.name}}</span>\n            &nbsp&nbsp\n            <span>{{fileSize}}</span>\n            <span v-if=\"file.fps\">&nbsp&nbsp帧率：{{file.fps}}</span>\n            <span v-if=\"file.width && file.height\">&nbsp&nbsp尺寸：{{file.width}}*{{file.height}}</span>\n        </div>\n\n        <div :class=\"['viewer-box', { 'is-mobile': viewer === 2 }]\">\n            <div class=\"viewer-screen\" :style=\"{ backgroundColor: color }\">\n                <div\n                    class=\"viewer\"\n                    id=\"demoCanvas\"\n                    ref=\"viewer\"></div>\n            </div>\n\n            <el-upload\n                v-if=\"animationShow === false\"\n                class=\"viewer-upload\"\n                drag\n                action=\"\"\n                :multiple=\"false\"\n                :show-file-list=\"false\"\n                :before-upload=\"handleBeforeUpload\">\n                <i class=\"el-icon-upload\"></i>\n                <div class=\"el-upload__text\">\n                    将文件拖到此处，或<em>点击上传</em>\n                </div>\n            </el-upload>\n        </div>\n    </div>\n</template>\n\n<script>\n// 播放容器尺寸：基于文件尺寸，最大宽度 1500，等比缩放；同步设置父容器 viewer-screen 高度\nfunction setContainerSize(container, w, h) {\n    const maxW = 1500;\n    if (!w || !h) { w = 200; h = 200; }\n    const width = Math.min(w, maxW);\n    const height = Math.round(h * (width / w));\n    container.style.width = width + 'px';\n    container.style.height = height + 'px';\n    const parent = container.parentElement;\n    if (parent && parent.classList.contains('viewer-screen')) {\n        parent.style.height = height + 'px';\n    }\n}\n\nclass Player {\n    constructor(file, container) {\n        this.data = '';\n        this.container = container;\n        this.player = null;\n    }\n    load() {}\n    init() {}\n    create() {}\n    destroy() {}\n    changeSize() {}\n}\n\nclass SvgaPlayer extends Player {\n    constructor(file, container, onMeta) {\n        super(file, container);\n        this.onMeta = onMeta;\n        this.url = null;\n        this.init(file);\n    }\n\n    load(file) {\n        return new Promise((resolve) => {\n            // 预先生成 Blob URL，作为 load 的主要输入\n            try { this.url = URL.createObjectURL(file); } catch (e) { this.url = null; }\n            // 同时读取 ArrayBuffer，作为备用\n            const reader = new FileReader();\n            reader.onload = (evt) => {\n                this.data = evt.target.result; // ArrayBuffer\n                resolve(this.data);\n            };\n            reader.readAsArrayBuffer(file);\n        });\n    }\n\n    init(file) {\n        this.load(file).then(() => {\n            this.create();\n        });\n    }\n\n    create() {\n        this.player = new SVGA.Player(this.container);\n        const parser = new SVGA.Parser();\n        const source = this.url || this.data; // 优先用 Blob URL，兼容 2.3.1\n        parser.load(source, (videoItem) => {\n            this.player.setVideoItem(videoItem);\n            const sz = videoItem.videoSize || {};\n            const fps = videoItem.FPS || videoItem.fps;\n\n            setContainerSize(this.container, sz.width, sz.height);\n\n            if (typeof this.onMeta === 'function') {\n                this.onMeta({\n                    type: 'svga',\n                    fps,\n                    width: sz.width,\n                    height: sz.height\n                });\n            }\n            this.player.startAnimation();\n        });\n    }\n\n    destroy() {\n        if (this.player) {\n            this.player.stopAnimation();\n            Array.from(this.container.children).forEach(el => el.remove());\n        }\n        if (this.url) {\n            try { URL.revokeObjectURL(this.url); } catch (e) {}\n            this.url = null;\n        }\n    }\n\n    changeSize() {\n        this.destroy();\n        this.create();\n    }\n}\n\nclass LottiePlayer extends Player {\n    constructor(file, container) {\n        super(file, container);\n        this.data = {};\n        this.init(file);\n    }\n\n    load(file) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onload = evt => {\n                this.data = JSON.parse(evt.target.result);\n                resolve(this.data);\n            };\n            reader.readAsText(file);\n        });\n    }\n\n    init(file) {\n        this.load(file).then(() => {\n            this.create();\n        });\n    }\n\n    create() {\n        const w = this.data.w || this.data.width;\n        const h = this.data.h || this.data.height;\n        setContainerSize(this.container, w, h);\n\n        this.player = lottie.loadAnimation({\n            container: this.container,\n            renderer: 'canvas',\n            loop: true,\n            autoplay: true,\n            animationData: this.data,\n        });\n    }\n\n    destroy() {\n        if (this.player) {\n            this.player.stop();\n            this.player.destroy();\n        }\n    }\n\n    changeSize() {\n        this.destroy();\n        this.create();\n    }\n}\n\nexport default {\n    name: 'Aview',\n    data() {\n        return {\n            color: '#ffffff',\n            fromShow: false,\n            viewer: 1,\n            $player: null,\n            animationShow: false,\n            file: {\n                fps: null,\n                width: null,\n                height: null\n            },\n            colors: ['#000000', '#ffffff', '#00ff00', '#C0392B', '#F1C40D', '#00b4ff']\n        };\n    },\n    mounted() {\n        // 在播放区域继续拖入文件替换播放\n        const screen = this.$el.querySelector('.viewer-screen');\n        if (screen) {\n            const onDragOver = (e) => { e.preventDefault(); };\n            const onDrop = (e) => {\n                e.preventDefault();\n                const f = e.dataTransfer && e.dataTransfer.files && e.dataTransfer.files[0];\n                if (f) { this.handleBeforeUpload(f); }\n            };\n            screen.addEventListener('dragover', onDragOver);\n            screen.addEventListener('drop', onDrop);\n            this._cleanupDragDrop = () => {\n                screen.removeEventListener('dragover', onDragOver);\n                screen.removeEventListener('drop', onDrop);\n            };\n        }\n    },\n    computed: {\n        fileSize() {\n            if (this.file.size) {\n                return Math.ceil(this.file.size / 1024) + 'kb'\n            }\n            return ''\n        },\n    },\n    methods: {\n        setColor(c) { this.color = c; },\n\n        updateSvgaMeta(meta) {\n            this.file.fps = meta.fps || null;\n            this.file.width = meta.width || null;\n            this.file.height = meta.height || null;\n        },\n        handleBeforeUpload(file) {\n            const name = (file && file.name) ? file.name : '';\n            const dom = this.$refs.viewer\n\n            console.log('[UPLOAD] receive file:', name, 'size=', file && file.size);\n\n            this.file.name = file.name\n            this.$set(this.file, 'size', file.size)\n\n            if (this.$player) {\n                this.$player.destroy();\n                this.animationShow = false;\n            }\n            if (/\\.svga$/i.test(name)) {\n                console.log('[SVGA] start load');\n                window.player = this.$player = new SvgaPlayer(file, dom, (meta) => {\n                    console.log('[SVGA] meta:', meta);\n                    this.updateSvgaMeta(meta)\n                })\n                this.animationShow = true;\n            }\n\n            if (/\\.json$/i.test(name)) {\n                console.log('[LOTTIE] start load');\n                window.player = this.$player = new LottiePlayer(file, dom)\n                this.file.fps = null;\n                this.file.width = null;\n                this.file.height = null;\n                this.animationShow = true;\n            }\n            return false\n        }\n    },\n    beforeDestroy() {\n        if (this._cleanupDragDrop) this._cleanupDragDrop();\n    }\n}\n</script>\n\n<style scoped>\n.viewer-box {\n    padding: 12px 0;\n    width: 100%;\n    height: auto;\n    min-height: 300px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: relative;\n    margin-top: 24px;\n    border: 1px dashed #ccc;\n}\n\n.viewer-screen {\n    width: 100%;\n    height: auto;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: relative;\n}\n\n/* 新增：颜色按钮样式 */\n.color-list {\n    display: flex;\n    gap: 8px;\n    align-items: center;\n}\n.color-btn {\n    width: 28px;\n    height: 28px;\n    border-radius: 6px;\n    border: 1px solid #ddd;\n    cursor: pointer;\n    padding: 0;\n}\n.color-btn.active {\n    outline: 2px solid #409EFF;\n    outline-offset: 2px;\n}\n\n.is-mobile {\n    background: #333;\n}\n\n.is-mobile>.viewer-screen {\n    width: 375px;\n    height: auto;\n    top: 0px;\n}\n\n.viewer-upload {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n}\n\n.input {\n    width: 100px;\n}\n\n.from {\n    display: flex;\n    height: 40px;\n}\n\n.lable {\n    margin-right: 12px;\n    display: flex;\n    align-items: center;\n}\n\n.lable::after {\n    content: \"\";\n    display: block;\n    height: 50%;\n    border-left: 1px solid #ccc;\n    margin-left: 12px;\n}\n</style>\n\n<style>\n.el-radio {\n    margin-right: 12px;\n}\n\n.el-input__suffix {\n    line-height: 28px;\n}\n\n.el-upload {\n    width: 100%;\n    height: 100%;\n}\n\n.el-upload-dragger {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    background-color: transparent;\n}\n\n.el-upload-dragger .el-icon-upload {\n    margin-top: 0px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}